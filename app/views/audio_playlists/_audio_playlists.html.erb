<% if @audio_playlists_count > 0 %>
    <%= @audio_playlists_count %> songs playlists found
    <table width="100%" cellspacing="0">
        <tr>
            <th class="list-header">
              <%= sort_link(@search, :id, "ID") %>
            </th>
            <th>
              <%= sort_link(@search, :program, "Program") %>
            </th>
            <th>
              <%= sort_link(@search, :airline, "Airline") %>
            </th>
            <th>
              <%= sort_link(@search, :in_out, "In/Out") %>
            </th>
            <th>
              <%= sort_link(@search, :start_playdate, "Start Month") %>
            </th>
            <th>
              <%= sort_link(@search, :end_playdate, "End Month") %>
            </th>
            <th>
              Total Duration</th>
            <th colspan="4"></th>
        </tr>
        <% @audio_playlists.each do |audio_playlist| %>
        <tr id="audio_playlist-<%=h audio_playlist.id %>">
            <% cache([audio_playlist]) do %>
            <td>
              <%= link_to audio_playlist.id, audio_playlist_path(:id => audio_playlist.id ) %>
            </td>
            <td>
              <%=h audio_playlist.program_cache if !audio_playlist.program_id.nil? %>
            </td>
            <td>
              <%=h audio_playlist.airline_cache if !audio_playlist.airline_id.nil? %>
            </td>
            <td>
              <%=h audio_playlist.in_out %>&nbsp;
            </td>
            <td>
              <%=h audio_playlist.start_playdate.strftime("%B %Y") if !audio_playlist.start_playdate.nil? %>&nbsp;
            </td>
            <td>
              <%=h audio_playlist.end_playdate.strftime("%B %Y") if !audio_playlist.end_playdate.nil? %>&nbsp;
            </td>
            <td>
              <%=h audio_playlist.total_duration_cached if !audio_playlist.total_duration.nil? %>
            </td>
            <% end %>
            <% if permitted_to? :edit, :audio_playlists %>
            <td>
              <%= link_to 'Edit', edit_audio_playlist_path(audio_playlist) if audio_playlist.locked!=true %>
            </td>
            <td>
              <%= link_to 'Delete',
                        remote: true,
                        url: audio_playlist_url(audio_playlist), :method => :delete,
                        confirm: 'Are you sure?', :loading => "Element.show('spinner')",
                        complete: "Element.hide('spinner')"  if audio_playlist.locked!=true  %>
            </td>
            <td>
              <%= link_to 'Duplicate', duplicate_audio_playlist_path(audio_playlist),
                        confirm: 'Are you sure?',
                        method: :post %>
            </td>
            <% end %>
            <td>
                <% if permitted_to? :lock, :audio_playlists %>
                <% if audio_playlist.locked!=true %>
                <%= link_to 'Lock', lock_audio_playlist_path(audio_playlist), method: :post %>
                <% else %>
                <%= link_to 'Unlock', unlock_audio_playlist_path(audio_playlist), method: :post %>
                <% end %>
                <% end %>
            </td>
        </tr>
        <% end %>
    </table>

    <%= will_paginate @audio_playlists %>

<% else %>
    No playlists were found
<% end %>