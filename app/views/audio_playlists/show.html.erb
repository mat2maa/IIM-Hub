<%= render partial: 'layouts/audio_nav' %>

<div class="container">

  <div class="row">
    <div class="span12">
      <div id="bootstrap-flash">
        <%= bootstrap_flash %>
      </div>
    </div>
    <!--/span-->
  </div>
  <!--/row-->

  <div class="row">
    <div class="span3">
      <div class="content">
        <% if @audio_playlist.user_id.present? %>
          <div class="info info-title">Programmer</div>
          <div class="info-list">
            <ul>
              <li class="info"><%= @audio_playlist.user.login.titleize if !@audio_playlist.user_id.nil? %>&nbsp;</li>
            </ul>
          </div>
          <br>
        <% end %>
        <div class="info info-title"><%= @audio_playlist.client_playlist_code %> Information</div>
        <div class="info-list">
          <ul>
            <li class="info">Program: <%= @audio_playlist.program.name if !@audio_playlist.program.nil? %>
            <li class="info">VO: <%= @audio_playlist.vo.name if !@audio_playlist.vo_id.nil? %>
            <li class="info">Airline: <%= @audio_playlist.airline.name if !@audio_playlist.airline_id.nil? %>
            <li class="info">In/Out: <%= @audio_playlist.in_out %>
            <li class="info">Play Date From: <%= @audio_playlist.start_playdate.strftime("%B %Y") %></li>
            <li class="info">Play Date To: <%= @audio_playlist.end_playdate.strftime("%B %Y") %></li>
          </ul>
        </div>
        <br>

        <div class="info info-title">Tools</div>
        <div class="info-list">
          <ul>
            <li class="info">
              <%= link_to "Print Playlist",
                          {controller: "audio_playlists",
                           action: "show",
                           id: @audio_playlist},
                          id: 'print_playlist',
                          target: '_blank' %>
            </li>
            <li class="info">
              <%= link_to "Export as Excel",
                          controller: "audio_playlists",
                          action: "export_to_excel",
                          id: @audio_playlist %>
            </li>
            <li class="info">
              <%= link_to "Edit Playlist",
                          {controller: "audio_playlists",
                           action: "edit",
                           id: @audio_playlist},
                          target: "_blank" %>
            </li>
          </ul>
        </div>
        <br>

        <div class="info info-title">Audio Player</div>
        <div class="info-list">
          <ul>
            <li class="info">
              <audio controls>
                <source src="" type="audio/mpeg">
                Your browser does not support the audio element.
              </audio>
            </li>
          </ul>
        </div>
        <br>
      </div>
      <!--end of .content-->
    </div>
    <!--end of .span-->

    <div class="span9">
      <div class="content">
        <div class="info info-title playlist-title">Playlist</div>
        <div id="playlist_item_view_container">
          <% @accum_duration = 0 %>
          <% @audio_playlist.audio_playlist_tracks_sorted.each.with_index do |track, index| %>
            <%= render partial: 'playlist_track_view', object: track, locals: {position: index + 1} %>
          <% end %>
        </div>
        <div class="download-info">
          <div class="links">
            <%= link_to 'Create Playlist Zip',
                        download_audio_playlist_path(@audio_playlist.id),
                        id: 'download_playlist_link' %>
            <% if @audio_playlist.finished? %>
              | <%= link_to "Download Playlist Zip", @audio_playlist.audio_playlist_zip.url %>
            <% end %>
          </div>
          <div class="progress-bar" style="width:0%;"></div>
          <div class="message"></div>
          <div class="progress"></div>
        </div>

        <%= link_to 'Back',
                    audio_playlists_path %>
      </div>
      <!--end of .content-->
    </div>
    <!--end of .span-->
  </div>
  <!--end of .row-->
</div>
<!--end of .container-->
