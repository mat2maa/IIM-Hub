<%= render partial: 'header' %>
<div id="content">
  <center>

    <h2>Users</h2>

    <%= search_form_for @search,
                        url: users_path do |f| %>
        <%= f.text_field :login_cont %>
        <%= f.submit "Search" %>
    <% end %>

    <% if @users_count > 0 %>
        <div id="admin-actions"><%= @users_count %> entries found</div>
        <table border="0" cellpadding="10" cellspacing="0" width="80%" class="list">
          <tr>
            <th><%= sort_link @search,
                              :id,
                              "ID" %></th>
            <th><%= sort_link @search,
                              :login,
                              "Login" %></th>
            <th>Last Login</th>
            <th>Last Request Date</th>
            <th colspan="2">&nbsp;</th>
          </tr>
          <%= render partial: 'user',
                     collection: @users %>
        </table>
        <br/>
        <br/>
        <%= will_paginate @users %>
    <%
      def items_per_page_select(collection = Users)
        select_tag :per_page, options_for_select([10, 20, 50, 100, 300], collection.per_page)
      end
    %>
    <%= form_for '/users', method: :get, html: { class: 'items_per_page_select' } do |f| %>
      <span>Items per page: </span>
      <%= items_per_page_select @users %>
      <%= f.submit "Submit" %>
    <% end %>
    <% else %>
        No entries were returned
    <% end %>
  </center>
</div>
</div>