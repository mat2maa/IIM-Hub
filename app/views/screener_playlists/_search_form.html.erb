<% @span_size = controller.action_name == 'index' ? 'span12' : 'span3' %>

<%= search_form_for @search,
                    builder: MinimalNestedFormBuilder,
                    class: 'spinner-trigger search-form' do |screener_playlists| %>
  <div class="control-group" style="<%= controller.action_name == 'index' ? 'margin-top: 0px;' : 'margin-top: 20px;' %>">

    <!--<div class="controls combinator-select-container">-->
    <%#= screener_playlists.combinator_select %>
    <!--</div>-->

    <div class="controls controls-row">
      <%= screener_playlists.input_field :id_eq,
                                         class: "#{@span_size}",
                                         placeholder: 'Playlist ID' %>
    </div>

    <div class="controls controls-row">
      <%= screener_playlists.input_field :airline_id_eq,
                                         as: :select,
                                         collection: Airline.connection.execute(Airline.select('name, id').order("name asc").to_sql).to_a,
                                         include_blank: true,
                                         class: "select2 #{@span_size}",
                                         data: {placeholder: 'Airline'} %>
    </div>

    <div class="controls controls-row">
      <%= screener_playlists.input_field :video_playlist_type_id_eq,
                                         as: :select,
                                         collection: VideoPlaylistType.connection.execute(VideoPlaylistType.select('name, id').order("name asc").to_sql).to_a,
                                         include_blank: true,
                                         class: "select2 #{@span_size}",
                                         data: {placeholder: 'Screener Playlist Type'} %>
    </div>

    <div class="controls controls-row">
      <%= render partial: 'application/bootstrap_append_datepicker',
                 locals: {f: screener_playlists,
                          field: :start_cycle_matches,
                          value: params[:q].present? && params[:q][:start_cycle_matches].present? ? params[:q][:start_cycle_matches] : '',
                          input_id: 'start_cycle_matches_datepicker',
                          date_format: 'mm/yyyy',
                          date_viewmode: 'months',
                          date_minviewmode: 'months',
                          datepicker_behaviour: 'datepicker-months',
                          placeholder: 'Start Playdate',
                          span: @span_size} %>
    </div>

    <div class="controls controls-row">
      <%= render partial: 'application/bootstrap_append_datepicker',
                 locals: {f: screener_playlists,
                          field: :end_cycle_matches,
                          value: params[:q].present? && params[:q][:end_cycle_matches].present? ? params[:q][:end_cycle_matches] : '',
                          input_id: 'end_cycle_matches_datepicker',
                          date_format: 'mm/yyyy',
                          date_viewmode: 'months',
                          date_minviewmode: 'months',
                          datepicker_behaviour: 'datepicker-months',
                          placeholder: 'End Playdate',
                          span: @span_size} %>
    </div>

  </div>

  <%= screener_playlists.submit "Search",
                                {class: 'btn'} %>
  <input class="form-reset btn" type="reset" value="Reset">

<% end %>
